# 💬 카카오톡 오픈챗 분석기

카카오톡에서 내보낸 채팅 내역을 분석하여 인사이트를 제공하는 웹 기반 도구입니다.

## ✨ 주요 기능

### 📁 파일 업로드
- 카카오톡 CSV/TXT 형식 지원
- 자동 인코딩 감지
- 다양한 카카오톡 메시지 형식 파싱
- 데이터베이스 자동 저장

### 🔍 데이터 필터링
- **기간 설정**: 시작일과 종료일 지정
- **사용자 선택**: 특정 사용자 또는 전체 분석
- **키워드 필터링**: 특정 키워드가 포함된 메시지만 분석

### 🤖 GPT 분석
- **종합 분석**: 전반적인 대화 패턴과 주제 분석
- **감정 분석**: 긍정/부정/중립 감정 분석
- **키워드 추출**: 주요 키워드와 트렌드 파악
- **토픽 분석**: 대화 주제별 분류 및 분석
- **요약**: 핵심 내용 정리
- **분석 결과 자동 저장**

### 📊 시각화
- **시간대별 활동**: 언제 가장 활발한지 분석
- **사용자별 통계**: 누가 얼마나 대화했는지
- **워드클라우드**: 자주 사용된 단어 시각화
- **감정 분석 차트**: 감정 변화 추이

### 📄 리포트 생성 ⭐ NEW!
- **PDF 리포트**: 전문적인 분석 리포트 생성
- **Excel 리포트**: 상세 데이터 및 통계 시트
- **GPT 분석 결과 포함**: 분석 내용을 리포트에 자동 포함
- **차트 및 그래프**: 시각화 자료 포함

### 🗃️ 데이터 관리 ⭐ NEW!
- **세션 저장**: 분석 결과를 데이터베이스에 영구 저장
- **세션 관리**: 과거 분석 내역 조회 및 관리
- **빠른 로드**: 저장된 세션을 빠르게 불러오기
- **분석 히스토리**: GPT 분석 결과 이력 관리
- **데이터 검색**: 저장된 메시지에서 키워드 검색

## 🚀 설치 및 실행

### 1. 의존성 설치
```bash
pip install -r requirements.txt
```

### 2. 애플리케이션 실행
```bash
streamlit run app.py
# 또는
python run.py
```

### 3. 웹 브라우저에서 접속
브라우저에서 `http://localhost:8501`로 접속

## 📝 사용법

### 1단계: 파일 업로드
1. 카카오톡에서 채팅방 내보내기
2. 생성된 TXT 또는 CSV 파일을 업로드
3. 데이터 미리보기 확인
4. **세션 이름 설정 후 데이터베이스에 저장**

### 2단계: 데이터 필터링 (선택사항)
1. 분석할 기간 설정
2. 특정 사용자 선택
3. 키워드 입력 (예: "주식", "비트코인", "삼성전자")

### 3단계: GPT 분석
1. OpenAI API 키 입력
2. 분석 유형 선택
3. 분석 실행 및 결과 확인
4. **분석 결과 자동 저장**

### 4단계: 시각화
- 다양한 차트와 그래프로 결과 확인
- 워드클라우드로 주요 키워드 시각화

### 5단계: 리포트 생성 ⭐ NEW!
1. PDF 또는 Excel 형식 선택
2. GPT 분석 결과 포함 여부 선택
3. 리포트 생성 및 다운로드

### 6단계: 데이터 관리 ⭐ NEW!
1. 저장된 세션 목록 확인
2. 과거 분석 결과 조회
3. 세션 데이터 불러오기
4. 불필요한 세션 삭제

## 🔧 설정

### OpenAI API 키
- OpenAI 계정에서 API 키 발급 필요
- [OpenAI API Keys](https://platform.openai.com/api-keys)에서 생성
- 앱 내에서 안전하게 입력 (저장되지 않음)

### 지원하는 파일 형식

#### 카카오톡 TXT 형식
```
2023년 12월 1일 금요일

오후 2:30, 홍길동 : 안녕하세요!
오후 2:31, 김철수 : 반갑습니다
```

#### CSV 형식
```csv
날짜,사용자,메시지
2023-12-01 14:30:00,홍길동,안녕하세요!
2023-12-01 14:31:00,김철수,반갑습니다
```

## 📋 요구사항

- Python 3.7+
- OpenAI API 키 (GPT 분석 기능 사용 시)
- 인터넷 연결
- 약 50MB 디스크 공간 (데이터베이스용)

## 🗂️ 프로젝트 구조

```
kakao_summary/
├── app.py                    # 메인 애플리케이션
├── run.py                    # 실행 스크립트
├── requirements.txt          # 의존성 패키지
├── README.md                # 프로젝트 설명
├── kakao_analysis.db        # SQLite 데이터베이스 (자동 생성)
└── utils/
    ├── __init__.py
    ├── kakao_parser.py      # 카카오톡 파일 파싱
    ├── gpt_analyzer.py      # GPT 분석
    ├── data_processor.py    # 데이터 처리
    ├── report_generator.py  # 리포트 생성 ⭐ NEW!
    └── database_manager.py  # 데이터베이스 관리 ⭐ NEW!
```

## 🆕 새로운 기능

### 📄 PDF 리포트
- 전문적인 디자인의 분석 리포트
- 기본 통계, 사용자별 분석, GPT 결과 포함
- 차트와 그래프 자동 삽입
- 한글 폰트 지원

### 📊 Excel 리포트
- 여러 시트로 구성된 상세 데이터
- 요약, 전체 데이터, 사용자별 통계, 시간대별 통계
- GPT 분석 결과 및 키워드 시트
- 필터링 및 정렬 기능

### 🗃️ 데이터베이스 기능
- SQLite 기반 로컬 데이터베이스
- 세션별 데이터 관리
- 분석 결과 이력 저장
- 빠른 검색 및 필터링
- 데이터 백업 및 복구

## 🤝 기여

이 프로젝트는 오픈소스입니다. 버그 리포트나 기능 요청은 이슈로 등록해주세요.

## 📄 라이선스

MIT License

## ⚠️ 주의사항

- 개인 정보가 포함된 채팅 내역을 업로드할 때는 주의하세요
- OpenAI API 사용 시 요금이 발생할 수 있습니다
- 대용량 파일의 경우 처리 시간이 오래 걸릴 수 있습니다
- 데이터베이스 파일(`kakao_analysis.db`)을 정기적으로 백업하세요

## 💡 팁

- **정확한 분석을 위해**: 구체적인 키워드와 기간을 설정하세요
- **성능 향상을 위해**: 너무 긴 기간보다는 특정 기간으로 나누어 분석하세요
- **비용 절약을 위해**: 필터링을 통해 필요한 메시지만 선별 후 GPT 분석을 사용하세요
- **데이터 관리**: 세션 이름을 명확하게 설정해서 나중에 찾기 쉽게 하세요
- **리포트 활용**: PDF는 발표용, Excel은 데이터 분석용으로 활용하세요

## 🔮 향후 계획

- [ ] 실시간 채팅 분석
- [ ] 다국어 지원 (영어, 일본어)
- [ ] 고급 NLP 분석 (KoBERT 감정 분석)
- [ ] 클라우드 저장소 연동
- [ ] API 제공
- [ ] 웹 배포 버전

---

🎯 **목표**: 카카오톡 채팅 데이터에서 의미있는 인사이트를 쉽고 빠르게 추출하고 체계적으로 관리! 